<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			#chatBox {
				width: 100%;
				height: 100px;
				border: 1px solid black;
				overflow-y: scroll;
			}
			.message {
				margin: 5px 5px;
			}
		</style>
	</head>
	<body>
		<div id="chatBox"></div>
		<input type="text" id="messageInput" placeholder="Enter a message" />
		<button id="sendButton">Send</button>

		<script>
			const ws = new WebSocket("ws://localhost:3000/echo");

			const chatBox = document.getElementById("chatBox");
			const messageInput = document.getElementById("messageInput");
			const sendButton = document.getElementById("sendButton");

			ws.onmessage = (event) => {
				const message = document.createElement("div");
				const dateTime = new Date();

				message.className = "message";
				message.textContent = `@${dateTime.toLocaleString()}: ${event.data}`;

				chatBox.appendChild(message);
				chatBox.scrollTop = chatBox.scrollHeight;
			};

			sendButton.addEventListener("click", () => {
				const message = messageInput.value;

				if (message.trim() !== "") {
					ws.send(message);
					messageInput.value = "";
				}
			});

			messageInput.addEventListener("keypress", (event) => {
				if (event.key === "Enter") {
					sendButton.click();
				}
			});
		</script>
	</body>
</html>
